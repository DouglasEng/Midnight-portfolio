{% extends 'base.html' %}
{% load static %}

{% block content %}
<section class="section">
    <div class="fade-in">
        <h1 class="section-title">Casos Resolvidos</h1>
        <p class="text-center mb-2" style="font-size: 1.2rem; color: var(--noir-amber); max-width: 800px; margin: 0 auto 3rem;">
            Cada projeto √© um mist√©rio desvendado, uma solu√ß√£o encontrada nas sombras do c√≥digo. 
            Aqui est√£o documentados os casos mais intrigantes e suas respectivas solu√ß√µes.
        </p>
        
        {% if projetos %}
            <div class="cards-grid">
                {% for projeto in projetos %}
                <div class="card">
                    {% if projeto.imagem %}
                        <img src="{{ projeto.imagem.url }}" alt="{{ projeto.titulo }}" class="card-image">
                    {% else %}
                        <div style="width: 100%; height: 200px; background: linear-gradient(135deg, var(--noir-gray), var(--noir-dark-gray)); border-radius: 5px; margin-bottom: 1rem; display: flex; align-items: center; justify-content: center; color: var(--noir-amber); font-size: 3rem;">
                            üîç
                        </div>
                    {% endif %}
                    
                    <div style="margin-bottom: 1rem; font-size: 0.9rem; color: var(--noir-amber);">
                        üìÖ {{ projeto.data_criacao|date:"d/m/Y" }} | üîç Caso #{{ projeto.id }}
                    </div>
                    
                    <h3 class="card-title">{{ projeto.titulo }}</h3>
                    <p class="card-description">{{ projeto.descricao|linebreaks }}</p>
                    
                    {% if projeto.tecnologias %}
                        <div style="margin: 1.5rem 0;">
                            <h4 style="color: var(--noir-gold); font-size: 1rem; margin-bottom: 0.8rem;">
                                üõ†Ô∏è Ferramentas Utilizadas:
                            </h4>
                            <div class="tech-tags">
                                {% for tech in projeto.listar_tecnologias %}
                                    <span class="tech-tag">{{ tech }}</span>
                                {% endfor %}
                            </div>
                        </div>
                    {% endif %}
                    
                    <div style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid var(--noir-gray);">
                        {% if projeto.link %}
                            <a href="{{ projeto.link }}" target="_blank" class="btn" style="padding: 0.7rem 1.5rem; margin-right: 1rem;">
                                üîó Examinar Evid√™ncias
                            </a>
                        {% endif %}
                        
                        <div style="margin-top: 1rem; color: var(--noir-cream); font-size: 0.9rem; font-style: italic;">
                            "Caso encerrado com sucesso. Solu√ß√£o implementada e documentada."
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
        {% else %}
            <div class="text-center" style="padding: 4rem 2rem;">
                <div class="card" style="max-width: 600px; margin: 0 auto;">
                    <h3 style="color: var(--noir-gold); margin-bottom: 1.5rem;">
                        üîç Arquivo de Casos Vazio
                    </h3>
                    <p style="font-size: 1.2rem; color: var(--noir-amber); margin-bottom: 2rem;">
                        Os arquivos est√£o sendo organizados. Novos casos ser√£o documentados 
                        em breve para an√°lise e refer√™ncia futura.
                    </p>
                    <p style="color: var(--noir-cream); font-style: italic;">
                        "Todo investigador precisa de tempo para catalogar adequadamente 
                        seus casos mais importantes."
                    </p>
                    <div style="margin-top: 2rem;">
                        <a href="{% url 'home' %}" class="btn">Voltar ao Escrit√≥rio</a>
                    </div>
                </div>
            </div>
        {% endif %}
        
        <!-- Se√ß√£o de estat√≠sticas -->
        {% if projetos %}
        <section style="margin-top: 4rem; padding: 2rem; background: rgba(26, 26, 26, 0.8); border-radius: 10px; border: 1px solid var(--noir-gray);">
            <h3 class="text-center" style="color: var(--noir-gold); margin-bottom: 2rem;">
                üìä Estat√≠sticas do Investigador
            </h3>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; text-align: center;">
                <div>
                    <div style="font-size: 2.5rem; color: var(--noir-gold); margin-bottom: 0.5rem;">
                        {{ projetos|length }}
                    </div>
                    <div style="color: var(--noir-amber);">Casos Resolvidos</div>
                </div>
                
                <div>
                    <div style="font-size: 2.5rem; color: var(--noir-gold); margin-bottom: 0.5rem;">
                        {% with total_techs=0 %}
                            {% for projeto in projetos %}
                                {% with total_techs=total_techs|add:projeto.listar_tecnologias|length %}{% endwith %}
                            {% endfor %}
                            {{ total_techs|default:"0" }}
                        {% endwith %}
                    </div>
                    <div style="color: var(--noir-amber);">Tecnologias Dominadas</div>
                </div>
                
                <div>
                    <div style="font-size: 2.5rem; color: var(--noir-gold); margin-bottom: 0.5rem;">
                        100%
                    </div>
                    <div style="color: var(--noir-amber);">Taxa de Sucesso</div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 2rem; color: var(--noir-cream); font-style: italic;">
                "Cada n√∫mero conta uma hist√≥ria de dedica√ß√£o e expertise t√©cnica."
            </div>
        </section>
        {% endif %}
    </div>
</section>
{% endblock %}

